// src/styles/layouts/_MainLayout.scss
// ==========================================================================
// Styles for the main application layout (header, sidebar, content area)
// used for authenticated users.
// Footer styles are now primarily in _Footer.scss.
// ==========================================================================

@use '../variables' as *;

// Main layout container
.main-layout {
  display: flex;
  flex-direction: column;
  min-height: 100vh; // Use min-height for flexibility

  // --- Header Styles --- (Keep as is)
  .header {
    background-color: var(--surface-tonal-1);
    color: var(--text-primary);
    box-shadow: $shadow;
    height: $header-height;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 $spacing-4;
    position: fixed; // Header is fixed
    top: 0;
    left: 0;
    right: 0;
    z-index: $z-index-fixed;
    border-bottom: 1px solid var(--surface-tonal-2);
    transition: background-color $transition-medium, color $transition-medium, border-color $transition-medium;

    .header-left {
      display: flex;
      align-items: center;
      .sidebar-toggle {
        background: none; border: none; cursor: pointer;
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        padding: $spacing-2; margin-right: $spacing-4;
        span {
          background-color: var(--text-secondary); display: block;
          height: 2px; width: 22px; margin: 2px 0;
          transition: all $transition-fast;
        }
        &:hover span { background-color: var(--primary); }
      }
      .logo {
        color: var(--primary); font-size: $font-size-xl;
        font-weight: $font-weight-bold; margin: 0; text-decoration: none;
      }
    }
    .header-right {
      display: flex; align-items: center;
      .user-info {
        display: flex; flex-direction: column; align-items: flex-end;
        margin-right: $spacing-3;
        .user-name { font-weight: $font-weight-medium; color: var(--text-primary); }
        .user-role { color: var(--text-muted); font-size: $font-size-xs; }
      }
      .theme-toggle-header {
          background: none; border: none; color: var(--text-secondary);
          cursor: pointer; font-size: $font-size-xl; padding: $spacing-2;
          margin-right: $spacing-2; transition: color $transition-fast;
          &:hover { color: var(--text-primary); }
          &:focus { outline: none; box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.4); }
      }
    }
  }

  // --- Main Container (Holds Sidebar + Content) ---
  .main-container {
    display: flex;
    flex-direction: row;
    flex-grow: 1; // Make this container grow vertically
    padding-top: $header-height; // Account for fixed header height
  }

  // --- Main Content Area Styles (Inside .main-container) ---
  .main-content {
    // No margin-top needed as parent (.main-container) has padding-top
    padding: $spacing-6;
    background-color: var(--surface-tonal);
    transition: margin-left $transition-medium, width $transition-medium, background-color $transition-medium;
    flex-grow: 1; // Make content area grow horizontally within .main-container
  }

  // --- Footer Alignment Styles (Direct child of .main-layout) ---
  // These rules align the footer horizontally with the main content area
  &.sidebar-open .public-footer { // Target footer when sidebar is open
    margin-left: $sidebar-width;
    width: calc(100% - #{$sidebar-width});
    transition: margin-left $transition-medium, width $transition-medium;
  }

  &.sidebar-closed .public-footer { // Target footer when sidebar is closed
    margin-left: $sidebar-collapsed-width;
    width: calc(100% - #{$sidebar-collapsed-width});
    transition: margin-left $transition-medium, width $transition-medium;
  }

  // --- Responsive Adjustments --- (Keep as is)
  @media (max-width: $breakpoint-md) {
    // Sidebar is handled via transform, content takes full width
    .main-content {
      margin-left: 0 !important;
      width: 100% !important;
      padding: $spacing-4;
    }
    // Footer also takes full width on mobile
    &.sidebar-open .public-footer,
    &.sidebar-closed .public-footer {
      margin-left: 0;
      width: 100%;
    }
    .header {
      padding: 0 $spacing-3;
      .header-left .logo { font-size: $font-size-lg; }
      .header-right .user-info { display: none; }
    }
  }
}
