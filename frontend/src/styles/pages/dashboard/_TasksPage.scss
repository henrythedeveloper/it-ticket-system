// src/styles/pages/dashboard/_TasksPage.scss
// ==========================================================================
// Styles specific to the Tasks list page.
// Includes filtering, search, and the task table.
// **REVISED: Ensured all colors use CSS variables.**
// ==========================================================================

@use '../../variables' as *;
@use '../../mixins'; // Use mixins

.tasks-page {
  max-width: 100%;
  margin-bottom: $spacing-8;

  // --- Filter Section ---
  .filter-section {
    background-color: var(--surface-bg); // Use CSS var
    padding: $spacing-4;
    border: 1px solid var(--border-color); // Use CSS var
    border-radius: $border-radius-lg;
    box-shadow: $shadow;
    margin-bottom: $spacing-6;
    transition: background-color $transition-medium, border-color $transition-medium;

    // Search form within filters
    .search-form {
      display: flex;
      margin-bottom: $spacing-4;
      .search-input { // Input field
        @include mixins.form-element-base; // Use input mixin (uses CSS vars)
        flex: 1;
        border-radius: $border-radius 0 0 $border-radius; // Adjust radius
      }
      .search-button { // Search button (uses global .btn styles)
          padding: $spacing-3 $spacing-5; // Specific padding
          border-radius: 0 $border-radius $border-radius 0; // Adjust radius
      }
    }

    // Container for dropdown filters and clear button
    .filters {
      display: flex;
      flex-wrap: wrap; // Allow filters to wrap on smaller screens
      gap: $spacing-4;
      align-items: center;

      .filter-group { // Grouping for label + select
        display: flex;
        align-items: center;
        label { margin-right: $spacing-2; font-weight: $font-weight-medium; color: var(--text-primary); transition: color $transition-medium; } // Use CSS var
        .filter-select { // Select dropdown
          @include mixins.form-element-base; // Use input mixin (uses CSS vars)
          @include mixins.select-arrow; // Add dropdown arrow (uses CSS vars)
          padding: $spacing-2; // Adjust padding for select
          min-width: 150px; // Give dropdowns a minimum width
        }
      }

      .clear-filters-btn { // Clear button style (uses global .btn.btn-outline)
          border-color: var(--border-color); // Use CSS var
          padding: $spacing-2 $spacing-3; // Smaller padding
          &:hover { background-color: var(--surface-alt-bg); } // Use CSS var
      }
    }
  }

  // --- Message for No Tasks Found ---
  .no-tasks {
    background-color: var(--surface-bg); border: 1px solid var(--border-color); // Use CSS vars
    padding: $spacing-8; border-radius: $border-radius-lg; box-shadow: $shadow;
    text-align: center; transition: background-color $transition-medium, border-color $transition-medium;
    p { color: var(--text-muted); margin-bottom: $spacing-4; } // Use CSS var
  }

  // --- Tasks Table Container ---
  .tasks-table-container {
    background-color: var(--surface-bg); border: 1px solid var(--border-color); // Use CSS vars
    border-radius: $border-radius-lg; box-shadow: $shadow;
    overflow: hidden; // Clip radius/shadow
    overflow-x: auto; // Allow horizontal scroll on small screens
    transition: background-color $transition-medium, border-color $transition-medium;
  }

  // --- Tasks Table ---
  .tasks-table {
    // Uses global table styles (which use CSS vars)
    th { padding: $spacing-3 $spacing-4; white-space: nowrap; }
    td { padding: $spacing-3 $spacing-4;
      // Style for the title cell link
      &.title-cell {
        font-weight: $font-weight-medium;
        a { color: var(--text-link); text-decoration: none; &:hover { text-decoration: underline; color: var(--text-link-hover); } } // Use CSS vars
      }
      // Style for overdue dates
      &.overdue { color: var(--error); font-weight: $font-weight-medium; } // Use CSS var
      // Actions cell (View/Delete buttons)
      &.actions-cell {
        white-space: nowrap; display: flex; gap: $spacing-2;
        .view-btn, .delete-btn { // Uses global .btn styles
          padding: $spacing-1 $spacing-3; font-size: $font-size-sm; // Smaller buttons
        }
      }
    }
  }

  // --- Status Badge Styles ---
  .status-badge {
    @include mixins.badge-base; // Mixin uses CSS vars
    min-width: 80px; // Consistent width
    // Apply task status colors (using CSS vars defined in _variables.scss or global.scss)
    &.badge-open { background-color: rgba(var(--warning-rgb), 0.15); color: var(--warning); }
    &.badge-progress { background-color: rgba(var(--info-rgb), 0.15); color: var(--info); }
    &.badge-completed { background-color: rgba(var(--success-rgb), 0.15); color: var(--success); }
  }
}

// --- Responsive Adjustments ---
@media (max-width: $breakpoint-md) {
  .tasks-page {
    .filter-section .filters { // Stack filters vertically
      flex-direction: column; align-items: flex-start;
      .filter-group { width: 100%; label { width: 100px; } .filter-select { flex: 1; } }
      .clear-filters-btn { width: 100%; margin-top: $spacing-2; }
    }
    .tasks-table { // Hide less critical columns
      th, td { padding: $spacing-2; }
      th:nth-child(5), th:nth-child(6), // Hide Due Date, Created By
      td:nth-child(5), td:nth-child(6) { display: none; }
    }
  }
}
