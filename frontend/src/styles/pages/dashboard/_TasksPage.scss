// src/styles/pages/dashboard/_TasksPage.scss

@use '../../variables' as *;

.tasks-page {
  max-width: 100%;
  margin-bottom: $spacing-8;

  .filter-section {
    background-color: var(--surface-bg); // Use CSS variable
    padding: $spacing-4;
    border: 1px solid var(--border-color); // Use CSS variable
    border-radius: $border-radius-lg;
    box-shadow: $shadow; // Shadow might need adjustment
    margin-bottom: $spacing-6;
    transition: background-color $transition-medium, border-color $transition-medium;

    .search-form {
      display: flex;
      margin-bottom: $spacing-4;

      .search-input {
        // Inherits from _forms.scss
        flex: 1;
        border-radius: $border-radius 0 0 $border-radius;
      }

      .search-button {
         padding: $spacing-3 $spacing-5; // Keep specific padding
         border-radius: 0 $border-radius $border-radius 0;
      }
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: $spacing-4;
      align-items: center;

      .filter-group {
        display: flex;
        align-items: center;

        label {
          margin-right: $spacing-2;
          font-weight: $font-weight-medium;
          color: var(--text-primary); // Use CSS variable
          transition: color $transition-medium;
        }

        .filter-select {
          // Inherits from _forms.scss
          padding: $spacing-2; // Adjust padding if needed
        }
      }

      .clear-filters-btn {
         background-color: var(--surface-bg); // Use CSS variable
         color: var(--text-secondary); // Use CSS variable
         border: 1px solid var(--border-color); // Use CSS variable
         padding: $spacing-2 $spacing-3; // Keep specific padding

         &:hover {
           background-color: var(--surface-alt-bg); // Use CSS variable
           color: var(--text-primary); // Use CSS variable
         }
      }
    }
  }

  .no-tasks {
    background-color: var(--surface-bg); // Use CSS variable
    border: 1px solid var(--border-color); // Use CSS variable
    padding: $spacing-8;
    border-radius: $border-radius-lg;
    box-shadow: $shadow; // Shadow might need adjustment
    text-align: center;
    transition: background-color $transition-medium, border-color $transition-medium;

    p {
      color: var(--text-muted); // Use CSS variable
      margin-bottom: $spacing-4;
    }
    .clear-filters-btn {
        background-color: var(--primary-light);
         &:hover {
           background-color: var(--primary-color);
         }
    }
  }

  .tasks-table-container {
    background-color: var(--surface-bg); // Use CSS variable
    border: 1px solid var(--border-color); // Use CSS variable
    border-radius: $border-radius-lg;
    box-shadow: $shadow; // Shadow might need adjustment
    overflow: hidden;
    transition: background-color $transition-medium, border-color $transition-medium;
  }

  .tasks-table {
    width: 100%;
    border-collapse: collapse;

    // th, td, tr hover styles inherited from global.scss using CSS vars

    th {
      padding: $spacing-3 $spacing-4;
      white-space: nowrap;
    }

    td {
      padding: $spacing-3 $spacing-4;

      &.title-cell {
        font-weight: $font-weight-medium;

        a {
          color: var(--text-link); // Use CSS variable
          text-decoration: none;

          &:hover {
            text-decoration: underline;
            color: var(--text-link-hover); // Use CSS variable
          }
        }
      }

      &.overdue {
        color: var(--error-color); // Use CSS variable
        font-weight: $font-weight-medium;
      }

      &.actions-cell {
        white-space: nowrap;
        display: flex;
        gap: $spacing-2;

        .view-btn, .delete-btn {
          padding: $spacing-1 $spacing-3;
          border-radius: $border-radius;
          font-size: $font-size-sm;
          cursor: pointer;
          transition: all $transition-fast;
          text-decoration: none; // Ensure link looks like button
          border: none; // Ensure button has no border
        }

        .view-btn {
          background-color: var(--primary-light);
          padding: $spacing-1 $spacing-3; // Override padding
          font-size: $font-size-sm; // Override font size

           &:hover {
             background-color: var(--primary-color);
           }
        }

        .delete-btn {
           padding: $spacing-1 $spacing-3; // Override padding
           font-size: $font-size-sm; // Override font size
        }
      }
    }
  }

  // Badge styles (using CSS variables set globally and potentially overridden)
  .status-badge {
    display: inline-block;
    padding: $spacing-1 $spacing-2;
    border-radius: $border-radius-full;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    text-align: center;
    min-width: 80px;
    transition: background-color $transition-medium, color $transition-medium;

    // Use CSS variables for status colors
    &.badge-open { background-color: rgba(var(--warning-color), 0.15); color: var(--warning-color); }
    &.badge-progress { background-color: rgba(var(--info-color), 0.15); color: var(--info-color); }
    &.badge-completed { background-color: rgba(var(--success-color), 0.15); color: var(--success-color); }
  }
}

// Responsive adjustments
@media (max-width: $breakpoint-md) {
  .tasks-page {
    .filter-section {
      .filters {
        flex-direction: column;
        align-items: flex-start;

        .filter-group {
          width: 100%;

          label {
            width: 100px; // Or adjust as needed
          }

          .filter-select {
            flex: 1;
          }
        }
      }
    }

    .tasks-table {
      th, td {
        padding: $spacing-2;
      }

      th:nth-child(5),
      th:nth-child(6),
      td:nth-child(5),
      td:nth-child(6) {
        display: none; // Hide less critical columns
      }
    }
  }
}
