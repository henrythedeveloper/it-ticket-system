// src/styles/pages/dashboard/_TasksPage.scss
// ==========================================================================
// Styles specific to the Tasks list page.
// Includes filtering, search, and the task table.
// ==========================================================================

@use '../../variables' as *;
@use '../../mixins'; // Use mixins

.tasks-page {
  max-width: 100%;
  margin-bottom: $spacing-8;

  // --- Page Header ---
  .page-header {
    // Uses global styles
    .header-actions { // Container for create button
      .create-task-btn { @extend .btn; } // Use global button style
    }
  }

  // --- Filter Section ---
  .filter-section {
    background-color: var(--surface-bg);
    padding: $spacing-4;
    border: 1px solid var(--border-color);
    border-radius: $border-radius-lg;
    box-shadow: $shadow;
    margin-bottom: $spacing-6;
    transition: background-color $transition-medium, border-color $transition-medium;

    // Search form within filters
    .search-form {
      display: flex;
      margin-bottom: $spacing-4;
      .search-input { // Input field
        @include mixins.form-element-base; // Use input mixin
        flex: 1;
        border-radius: $border-radius 0 0 $border-radius; // Adjust radius
      }
      .search-button { // Search button
          @extend .btn; // Use base button style
          padding: $spacing-3 $spacing-5; // Specific padding
          border-radius: 0 $border-radius $border-radius 0; // Adjust radius
      }
    }

    // Container for dropdown filters and clear button
    .filters {
      display: flex;
      flex-wrap: wrap; // Allow filters to wrap on smaller screens
      gap: $spacing-4;
      align-items: center;

      .filter-group { // Grouping for label + select
        display: flex;
        align-items: center;
        label { margin-right: $spacing-2; font-weight: $font-weight-medium; color: var(--text-primary); transition: color $transition-medium; }
        .filter-select { // Select dropdown
          @include mixins.form-element-base; // Use input mixin
          @include mixins.select-arrow; // Add dropdown arrow
          padding: $spacing-2; // Adjust padding for select
          min-width: 150px; // Give dropdowns a minimum width
        }
      }

      .clear-filters-btn { // Clear button style
          @extend .btn; // Use base button style
          @include mixins.button-outline-variant(--text-secondary, --text-primary); // Use outline style
          border-color: var(--border-color);
          padding: $spacing-2 $spacing-3; // Smaller padding
          &:hover { background-color: var(--surface-alt-bg); }
      }
    }
  }

  // --- Message for No Tasks Found ---
  .no-tasks {
    background-color: var(--surface-bg); border: 1px solid var(--border-color);
    padding: $spacing-8; border-radius: $border-radius-lg; box-shadow: $shadow;
    text-align: center; transition: background-color $transition-medium, border-color $transition-medium;
    p { color: var(--text-muted); margin-bottom: $spacing-4; }
    .clear-filters-btn { // Button to clear filters when none are found
        @extend .btn;
        @include mixins.button-variant(--primary-light, --text-primary, --primary-color); // Lighter primary bg
    }
  }

  // --- Tasks Table Container ---
  .tasks-table-container {
    background-color: var(--surface-bg); border: 1px solid var(--border-color);
    border-radius: $border-radius-lg; box-shadow: $shadow;
    overflow: hidden; // Clip radius/shadow
    overflow-x: auto; // Allow horizontal scroll on small screens
    transition: background-color $transition-medium, border-color $transition-medium;
  }

  // --- Tasks Table ---
  .tasks-table {
    // Uses global table styles
    th { padding: $spacing-3 $spacing-4; white-space: nowrap; }
    td { padding: $spacing-3 $spacing-4;
      // Style for the title cell link
      &.title-cell {
        font-weight: $font-weight-medium;
        a { color: var(--text-link); text-decoration: none; &:hover { text-decoration: underline; color: var(--text-link-hover); } }
      }
      // Style for overdue dates
      &.overdue { color: var(--error-color); font-weight: $font-weight-medium; }
      // Actions cell (View/Delete buttons)
      &.actions-cell {
        white-space: nowrap; display: flex; gap: $spacing-2;
        .view-btn, .delete-btn {
          @extend .btn; // Use base button styles
          padding: $spacing-1 $spacing-3; font-size: $font-size-sm; // Smaller buttons
        }
        .view-btn { // Specific view button style
          @include mixins.button-variant(--primary-light, --text-primary, --primary-color);
        }
        .delete-btn { @extend .btn-danger; } // Use danger variant
      }
    }
  }

  // --- Status Badge Styles ---
  .status-badge {
    @include mixins.badge-base;
    min-width: 80px; // Consistent width
    // Apply task status colors
    &.badge-open { background-color: rgba(var(--warning-color), 0.15); color: var(--warning-color); }
    &.badge-progress { background-color: rgba(var(--info-color), 0.15); color: var(--info-color); }
    &.badge-completed { background-color: rgba(var(--success-color), 0.15); color: var(--success-color); }
  }
}

// --- Responsive Adjustments ---
@media (max-width: $breakpoint-md) {
  .tasks-page {
    .filter-section .filters { // Stack filters vertically
      flex-direction: column; align-items: flex-start;
      .filter-group { width: 100%; label { width: 100px; } .filter-select { flex: 1; } }
      .clear-filters-btn { width: 100%; margin-top: $spacing-2; }
    }
    .tasks-table { // Hide less critical columns
      th, td { padding: $spacing-2; }
      th:nth-child(5), th:nth-child(6), // Hide Due Date, Created By
      td:nth-child(5), td:nth-child(6) { display: none; }
    }
  }
}
