// src/styles/components/common/_AttachmentUpload.scss
// ==========================================================================
// Styles specifically for the AttachmentUpload and SidebarAttachmentUpload components.
// ==========================================================================

@use '../../variables' as *; // Needed for non-color vars like spacing, breakpoints
@use '../../mixins'; // Use the new mixins file

// --- Attachment Input Styles (Shared for TicketForm & AttachmentUpload) ---
// Apply to both the form itself and the container div
.attachment-upload-form,
.attachment-input-area {
  margin-top: $spacing-1;
  margin-bottom: $spacing-3;
}

// Reset base form styles if needed for the upload form itself
.attachment-upload-form {
  padding: 0;
  background: none;
  box-shadow: none;
  border: none;
}

.attachment-input-area { // Styles for the container div
  display: flex; // Keep as flex
  flex-direction: column; // Keep as column
  align-items: stretch; // Keep as stretch
  gap: $spacing-2; // Keep gap
  margin-bottom: $spacing-2; // Add margin below the drop area
  position: relative; // Container needs to be relative
}

// --- Standard Visually Hidden Pattern ---
// This hides the input but keeps it accessible
// Applies globally to this class now.
.file-input-hidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
  white-space: nowrap; // prevent wrapping, making it truly 1px wide
  // Ensure it's positioned at the top-left of the container
  top: 0;
  left: 0;
}
// --- End Visually Hidden Pattern ---

.file-input-trigger { // This is the <label>
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1.25rem 0.75rem;
  border: 2px dashed var(--border-color-strong);
  border-radius: $border-radius-lg;
  background-color: var(--surface-alt-bg);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
  text-align: center;
  min-height: 80px;
  // Ensure the label takes up the space and is clickable
  position: relative; // Make sure it establishes a stacking context if needed
  z-index: 1; // Ensure label is visually on top of the hidden input

  svg {
    margin-bottom: 0.5rem;
    color: var(--primary);
  }

  &:hover {
    border-color: var(--primary);
    background-color: var(--surface-bg);
    color: var(--text-secondary);
  }
  &.drag-over {
    border-color: var(--primary);
    background-color: rgba(var(--primary-rgb), 0.07);
    color: var(--primary);

    svg {
      color: var(--primary-dark);
    }
  }
  // Style when disabled (e.g., during upload)
  &.disabled {
      cursor: not-allowed;
      opacity: 0.6;
      background-color: var(--surface-tonal-1);
      border-color: var(--border-color);
      color: var(--text-muted);
      svg { color: var(--text-muted); }
      &:hover { // Prevent hover styles when disabled
         border-color: var(--border-color);
         background-color: var(--surface-tonal-1);
         color: var(--text-muted);
      }
  }
}

.file-preview-list {
  margin-top: 0.5rem;
  border: 1px solid var(--border-color);
  border-radius: $border-radius;
  padding: 0.5rem;
  background-color: var(--surface-bg);
  max-height: 120px;
  overflow-y: auto;
}

.file-preview-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.25rem 0.5rem;
  font-size: $font-size-sm;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);

  &:last-child {
    border-bottom: none;
  }

  .file-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 0.5rem;
    flex-grow: 1;
  }

  .file-size {
    color: var(--text-muted);
    font-size: $font-size-xs;
    white-space: nowrap;
    margin-right: 0.5rem;
    flex-shrink: 0;
  }

  .remove-file-btn {
    background: none;
    border: none;
    color: var(--error);
    cursor: pointer;
    padding: 0.25rem;
    line-height: 1;
    border-radius: 50%;
    transition: background-color 0.15s;
    flex-shrink: 0;

    &:hover {
      background-color: rgba(var(--error-rgb), 0.13);
    }

    &:disabled {
      color: var(--text-muted);
      cursor: not-allowed;
      background-color: transparent;
    }
  }
}
// --- End Attachment Input Styles ---
